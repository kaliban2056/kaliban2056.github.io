<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Building a Simple Multi-Client Chat Application in Python | Kaliban's Blog</title><meta name=keywords content="programming,python,networking"><meta name=description content="In this post, I&rsquo;ll walk through a basic chat application I built using Python&rsquo;s socket and threading modules. This project allows multiple clients to connect to a server and communicate in real-time. It&rsquo;s a great example of how socket programming and threading can be used to build networked applications in Python.
Project Overview The project consists of two main scripts:
server.py: Manages client connections and broadcast messages to all clients. client."><meta name=author content="Kaliban"><link rel=canonical href=https://kaliban2056.github.io/posts/building-a-simple-multi-client-chat-application-in-python/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=https://kaliban2056.github.io/images/favicon.svg><link rel=icon type=image/png sizes=16x16 href=https://kaliban2056.github.io/images/favicon-16x16.svg><link rel=icon type=image/png sizes=32x32 href=https://kaliban2056.github.io/images/favicon-32x32.svg><link rel=apple-touch-icon href=https://kaliban2056.github.io/apple-touch-icon.png><link rel=mask-icon href=https://kaliban2056.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Building a Simple Multi-Client Chat Application in Python"><meta property="og:description" content="In this post, I&rsquo;ll walk through a basic chat application I built using Python&rsquo;s socket and threading modules. This project allows multiple clients to connect to a server and communicate in real-time. It&rsquo;s a great example of how socket programming and threading can be used to build networked applications in Python.
Project Overview The project consists of two main scripts:
server.py: Manages client connections and broadcast messages to all clients. client."><meta property="og:type" content="article"><meta property="og:url" content="https://kaliban2056.github.io/posts/building-a-simple-multi-client-chat-application-in-python/"><meta property="og:image" content="https://kaliban2056.github.io/link%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-09-23T15:41:49+02:00"><meta property="article:modified_time" content="2024-09-23T15:41:49+02:00"><meta property="og:site_name" content="Kaliban's Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://kaliban2056.github.io/link%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Building a Simple Multi-Client Chat Application in Python"><meta name=twitter:description content="In this post, I&rsquo;ll walk through a basic chat application I built using Python&rsquo;s socket and threading modules. This project allows multiple clients to connect to a server and communicate in real-time. It&rsquo;s a great example of how socket programming and threading can be used to build networked applications in Python.
Project Overview The project consists of two main scripts:
server.py: Manages client connections and broadcast messages to all clients. client."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://kaliban2056.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Building a Simple Multi-Client Chat Application in Python","item":"https://kaliban2056.github.io/posts/building-a-simple-multi-client-chat-application-in-python/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Building a Simple Multi-Client Chat Application in Python","name":"Building a Simple Multi-Client Chat Application in Python","description":"In this post, I\u0026rsquo;ll walk through a basic chat application I built using Python\u0026rsquo;s socket and threading modules. This project allows multiple clients to connect to a server and communicate in real-time. It\u0026rsquo;s a great example of how socket programming and threading can be used to build networked applications in Python.\nProject Overview The project consists of two main scripts:\nserver.py: Manages client connections and broadcast messages to all clients. client.","keywords":["programming","python","networking"],"articleBody":"In this post, I’ll walk through a basic chat application I built using Python’s socket and threading modules. This project allows multiple clients to connect to a server and communicate in real-time. It’s a great example of how socket programming and threading can be used to build networked applications in Python.\nProject Overview The project consists of two main scripts:\nserver.py: Manages client connections and broadcast messages to all clients. client.py: Connects to the server, sends messages, and receives messages from other clients. Key Featureswr Multi-client support: The server can handle multiple clients simultaneously. Nicknames: Each client is prompted to choose a nickname upon connection. Message broadcasting: Messages from one client are shared with all others. Join/Leave notification: Clients are notified when someone joins or leaves the chat. Server-Side Code Setting Up the Server Socket server = socket.socket(socket.AF_INET, socket.SOCK_STREAM) server.bind((host, port)) server.listen() socket.AF_INET: This specifies that we are using an IPv4 address. socket.SOCK_STREAM: We’re using TCP, which is a connection-oriented protocol. bind((host, port)): The server binds to the provided IP address and port. listen(): Starts the server, making it listen for incoming connections. This sets up a server that listen for incoming connections. When a client connects, the server will handle communication in a separate thread.\nAccepting Client Connections client, address = server.accept() accept(): Waits for an incoming connection. When a client connects, ti returns a new client socket and the client’s address. Once a connection is accepted, the server will assign the client to a separate thread for communication using the handle() function.\nHandling Client Messages def handle(client): while True: try: message = client.recv(1024) broadcast(message) except: # Client disconnects index = clients.index(client) clients.remove(client) client.close() nickname = nicknames[index] broadcast(f\"{nickname} left the chat.\".encode('ascii')) nicknames.remove(nickname) break client.recv(1024): Reads up to 1024 bytes of data from the client, which represents a message. broadcast(message): sends the received message to all connected clients. If the client disconnects or an error occurs, the server removes the client from the list and broadcast a notification to the other clients. Broadcasting Messages to All Clients def broadcast(message): for client in clients: client.send(message) This function iterates through all connected clients and sends them the given message. It’s used whenever a client sends a message or when a user joins or leaves the chat. Listening for New Connections def receive(): while True: client, address = server.accept() client.send(\"NICK\".encode('ascii')) nickname = client.recv(1024).decode('ascii') nicknames.append(nickname) clients.append(client) print(f\"Nickname of the client is {nickname}\") broadcast(f\"{nickname} joined the chat\".encode('ascii')) thread = threading.Thread(target=handle, args=(client,)) thread.start() server.accept(): Accepts new client connections. client.send(\"NICK\"): Request a nickname from the client. nickname = client.recv(1024).decode(): Receives and decodes the nickname sent by the client. threading.Thread(target=handle): Starts a new thread for each connected client, allowing multiple clients to communicate without blocking one another. The receive() function continuously waits for new clients and assigns each one to a new thread for indivisual handling.\nClient-Side Code Setting Up the Client Socket clietn = socket.socket(socket.AF_INET, socket.SOCK_STREAM) client.connect((\"127.0.0.1\", 5555)) socket.AF_INET: Specifies that we are using IPv4. socket.SOCK_STREAM Sets up the socket to use TCP. connect(): Connects to the server at the specified IP and port. Once connected, the client will interact with the server by sending and receiving messages.\nReceiving Messages from the Server def receive(): while True: try: message = client.recv(1024).decode('ascii') if message == \"NICK\": client.send(nickname.encode('ascii')) else: print(message) except: print(\"An error occurred!\") client.close() break client.recv(1024): Listens for incoming messages from the server. If the server sends “NICK”, the client responds by sending its nickname. Otherwise, the message is printed to the console. If there is an error, the client closes the connection. Sending Messages to the Server: def write(): while True: message = f\"{nickname}: {input('')}\" client.send(message.encode('ascii')) This function continuosly waits for user input and sends it to the server. input(): Reads user input from the console. The message is sent to the server, where it is broadcast to other connected clients. Running the Application Start the Server In one terminal, run the server:\npython3 server.py The server will start listening for client connections.\nConnect Clients In other terminals, run multiple instances of the client:\npython3 client.py Each client will be promoted to choose a nickname, and once connected, they can send and receive messages.\nChat in Real-Time Messages typed in any client terminal will be broadcast to all connected clients. If a user disconnects, the other clients will be notified.\nLearning Points Socket Programming This project demonstrates the fundamentals of socket programming:\nServer-Client communication: You learned how to establish a connection between a server and multiple clients over TCP. Socket creation: Both server and client sockets were created to send and receive data. Handling multiple clients: With threading, the server can manage multiple clients simultaneously, making this a simple but powerful example of concurrent network programming. Threading in Python Parallel handling of clients: The use of threads ensures that the server can handle multiple clients concurrently without blocking or slowing down due to one particular client. Thread safety: Although this example doesn’t cover it explicitly, dealing with shared resources across threads requires care, especially when working on larger or more complex applications. Message Broadcasting The server can broadcast any client’s message to all other connected clients. This is a critical pattern in applications like chat rooms, multiplayer games, and real-time collaborative platforms.\nHandling Client Disconnects The server not only handles client connections but also gracefully removes clients from the active list upon disconnection. This ensures that resources are cleaned up properly and other clients are notified.\nFinal Thoughts This project offers a solid foundation for understanding socket programming, multi-threading, and basic network communication in Python. From here, you can expand and improve the project by:\nAdding a GUI: A graphical interface would make the chat application more user-friendly. Implementing encryption: Add security to the chat by encrypting messages between the server and clients using SSL/TLS. Enhancing error handling: While this application handles basic errors like disconnections, more sophisticated error handling would make it more robust. Scaling: Modify the server to handle more significant traffic, or make it accessible over a public IP for use across networks. Feel free to experiment with the code, build upon it, and explore more advanced topics like non-blocking sockets, socket.io for web applications, or even building your own messaging protocols.\n","wordCount":"1028","inLanguage":"en","image":"https://kaliban2056.github.io/link%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2024-09-23T15:41:49+02:00","dateModified":"2024-09-23T15:41:49+02:00","author":{"@type":"Person","name":"Kaliban"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://kaliban2056.github.io/posts/building-a-simple-multi-client-chat-application-in-python/"},"publisher":{"@type":"Organization","name":"Kaliban's Blog","logo":{"@type":"ImageObject","url":"https://kaliban2056.github.io/images/favicon.svg"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://kaliban2056.github.io/ accesskey=h title="Kaliban's Blog (Alt + H)"><img src=https://kaliban2056.github.io/apple-touch-icon.png alt aria-label=logo height=35>Kaliban's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://kaliban2056.github.io/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://kaliban2056.github.io/projects/ title=Projects><span>Projects</span></a></li><li><a href=https://kaliban2056.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://kaliban2056.github.io/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://kaliban2056.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://kaliban2056.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Building a Simple Multi-Client Chat Application in Python</h1><div class=post-meta><span title='2024-09-23 15:41:49 +0200 +0200'>September 23, 2024</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;Kaliban&nbsp;|&nbsp;<a href=https://github.com/kaliban2056/kaliban2056.github.io/content/posts/building-a-simple-multi-client-chat-application-in-python.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><p>In this post, I&rsquo;ll walk through a basic chat application I built using Python&rsquo;s <code>socket</code> and <code>threading</code> modules.
This project allows multiple clients to connect to a server and communicate in real-time.
It&rsquo;s a great example of how socket programming and threading can be used to build networked applications in Python.</p><h2 id=project-overview>Project Overview<a hidden class=anchor aria-hidden=true href=#project-overview>#</a></h2><p>The project consists of two main scripts:</p><ul><li><code>server.py</code>: Manages client connections and broadcast messages to all clients.</li><li><code>client.py</code>: Connects to the server, sends messages, and receives messages from other clients.</li></ul><h3 id=key-featureswr>Key Featureswr<a hidden class=anchor aria-hidden=true href=#key-featureswr>#</a></h3><ul><li><strong>Multi-client support</strong>: The server can handle multiple clients simultaneously.</li><li><strong>Nicknames</strong>: Each client is prompted to choose a nickname upon connection.</li><li><strong>Message broadcasting</strong>: Messages from one client are shared with all others.</li><li><strong>Join/Leave notification</strong>: Clients are notified when someone joins or leaves the chat.</li></ul><h2 id=server-side-code>Server-Side Code<a hidden class=anchor aria-hidden=true href=#server-side-code>#</a></h2><ol><li><strong>Setting Up the Server Socket</strong></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>server</span> <span class=o>=</span> <span class=n>socket</span><span class=o>.</span><span class=n>socket</span><span class=p>(</span><span class=n>socket</span><span class=o>.</span><span class=n>AF_INET</span><span class=p>,</span> <span class=n>socket</span><span class=o>.</span><span class=n>SOCK_STREAM</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>server</span><span class=o>.</span><span class=n>bind</span><span class=p>((</span><span class=n>host</span><span class=p>,</span> <span class=n>port</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>server</span><span class=o>.</span><span class=n>listen</span><span class=p>()</span>
</span></span></code></pre></div><ul><li><code>socket.AF_INET</code>: This specifies that we are using an IPv4 address.</li><li><code>socket.SOCK_STREAM</code>: We&rsquo;re using TCP, which is a connection-oriented protocol.</li><li><code>bind((host, port))</code>: The server binds to the provided IP address and port.</li><li><code>listen()</code>: Starts the server, making it listen for incoming connections.</li></ul><p>This sets up a server that listen for incoming connections. When a client connects, the server will handle communication in a separate thread.</p><ol start=2><li><strong>Accepting Client Connections</strong></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>client</span><span class=p>,</span> <span class=n>address</span> <span class=o>=</span> <span class=n>server</span><span class=o>.</span><span class=n>accept</span><span class=p>()</span>
</span></span></code></pre></div><ul><li><code>accept()</code>: Waits for an incoming connection. When a client connects, ti returns a new <code>client</code> socket and the client&rsquo;s <code>address</code>.</li></ul><p>Once a connection is accepted, the server will assign the client to a separate thread for communication using the <code>handle()</code> function.</p><ol start=3><li><strong>Handling Client Messages</strong></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>handle</span><span class=p>(</span><span class=n>client</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>message</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>recv</span><span class=p>(</span><span class=mi>1024</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>broadcast</span><span class=p>(</span><span class=n>message</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>except</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># Client disconnects</span>
</span></span><span class=line><span class=cl>            <span class=n>index</span> <span class=o>=</span> <span class=n>clients</span><span class=o>.</span><span class=n>index</span><span class=p>(</span><span class=n>client</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>clients</span><span class=o>.</span><span class=n>remove</span><span class=p>(</span><span class=n>client</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>client</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>nickname</span> <span class=o>=</span> <span class=n>nicknames</span><span class=p>[</span><span class=n>index</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=n>broadcast</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>nickname</span><span class=si>}</span><span class=s2> left the chat.&#34;</span><span class=o>.</span><span class=n>encode</span><span class=p>(</span><span class=s1>&#39;ascii&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            <span class=n>nicknames</span><span class=o>.</span><span class=n>remove</span><span class=p>(</span><span class=n>nickname</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>break</span>
</span></span></code></pre></div><ul><li><code>client.recv(1024)</code>: Reads up to 1024 bytes of data from the client, which represents a message.</li><li><code>broadcast(message)</code>: sends the received message to all connected clients.</li><li>If the client disconnects or an error occurs, the server removes the client from the list and broadcast a notification to the other clients.</li></ul><ol start=4><li><strong>Broadcasting Messages to All Clients</strong></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>broadcast</span><span class=p>(</span><span class=n>message</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>client</span> <span class=ow>in</span> <span class=n>clients</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>client</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=n>message</span><span class=p>)</span>
</span></span></code></pre></div><ul><li>This function iterates through all connected clients and sends them the given message. It&rsquo;s used whenever a client sends a message or when a user joins or leaves the chat.</li></ul><ol start=5><li><strong>Listening for New Connections</strong></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>receive</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>client</span><span class=p>,</span> <span class=n>address</span> <span class=o>=</span> <span class=n>server</span><span class=o>.</span><span class=n>accept</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>client</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=s2>&#34;NICK&#34;</span><span class=o>.</span><span class=n>encode</span><span class=p>(</span><span class=s1>&#39;ascii&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=n>nickname</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>recv</span><span class=p>(</span><span class=mi>1024</span><span class=p>)</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=s1>&#39;ascii&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>nicknames</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>nickname</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>clients</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>client</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Nickname of the client is </span><span class=si>{</span><span class=n>nickname</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>broadcast</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>nickname</span><span class=si>}</span><span class=s2> joined the chat&#34;</span><span class=o>.</span><span class=n>encode</span><span class=p>(</span><span class=s1>&#39;ascii&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=n>thread</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>handle</span><span class=p>,</span> <span class=n>args</span><span class=o>=</span><span class=p>(</span><span class=n>client</span><span class=p>,))</span>
</span></span><span class=line><span class=cl>        <span class=n>thread</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span></code></pre></div><ul><li><code>server.accept()</code>: Accepts new client connections.</li><li><code>client.send("NICK")</code>: Request a nickname from the client.</li><li><code>nickname = client.recv(1024).decode()</code>: Receives and decodes the nickname sent by the client.</li><li><code>threading.Thread(target=handle)</code>: Starts a new thread for each connected client, allowing multiple clients to communicate without blocking one another.</li></ul><p>The <code>receive()</code> function continuously waits for new clients and assigns each one to a new thread for indivisual handling.</p><h2 id=client-side-code>Client-Side Code<a hidden class=anchor aria-hidden=true href=#client-side-code>#</a></h2><ol><li><strong>Setting Up the Client Socket</strong></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>clietn</span> <span class=o>=</span> <span class=n>socket</span><span class=o>.</span><span class=n>socket</span><span class=p>(</span><span class=n>socket</span><span class=o>.</span><span class=n>AF_INET</span><span class=p>,</span> <span class=n>socket</span><span class=o>.</span><span class=n>SOCK_STREAM</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>client</span><span class=o>.</span><span class=n>connect</span><span class=p>((</span><span class=s2>&#34;127.0.0.1&#34;</span><span class=p>,</span> <span class=mi>5555</span><span class=p>))</span>
</span></span></code></pre></div><ul><li><code>socket.AF_INET</code>: Specifies that we are using IPv4.</li><li><code>socket.SOCK_STREAM</code> Sets up the socket to use TCP.</li><li><code>connect()</code>: Connects to the server at the specified IP and port.</li></ul><p>Once connected, the client will interact with the server by sending and receiving messages.</p><ol start=2><li><strong>Receiving Messages from the Server</strong></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>receive</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>message</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>recv</span><span class=p>(</span><span class=mi>1024</span><span class=p>)</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=s1>&#39;ascii&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>message</span> <span class=o>==</span> <span class=s2>&#34;NICK&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>client</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=n>nickname</span><span class=o>.</span><span class=n>encode</span><span class=p>(</span><span class=s1>&#39;ascii&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=n>message</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>except</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;An error occurred!&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>client</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=k>break</span>
</span></span></code></pre></div><ul><li><code>client.recv(1024)</code>: Listens for incoming messages from the server.</li><li>If the server sends &ldquo;NICK&rdquo;, the client responds by sending its nickname.</li><li>Otherwise, the message is printed to the console.</li><li>If there is an error, the client closes the connection.</li></ul><ol start=3><li><strong>Sending Messages to the Server</strong>:</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>write</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>message</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>nickname</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=nb>input</span><span class=p>(</span><span class=s1>&#39;&#39;</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>client</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=n>message</span><span class=o>.</span><span class=n>encode</span><span class=p>(</span><span class=s1>&#39;ascii&#39;</span><span class=p>))</span>
</span></span></code></pre></div><ul><li>This function continuosly waits for user input and sends it to the server.</li><li><code>input()</code>: Reads user input from the console.</li><li>The message is sent to the server, where it is broadcast to other connected clients.</li></ul><h2 id=running-the-application>Running the Application<a hidden class=anchor aria-hidden=true href=#running-the-application>#</a></h2><ol><li><strong>Start the Server</strong></li></ol><p>In one terminal, run the server:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>python3</span> <span class=n>server</span><span class=o>.</span><span class=n>py</span>
</span></span></code></pre></div><p>The server will start listening for client connections.</p><ol start=2><li><strong>Connect Clients</strong></li></ol><p>In other terminals, run multiple instances of the client:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>python3</span> <span class=n>client</span><span class=o>.</span><span class=n>py</span>
</span></span></code></pre></div><p>Each client will be promoted to choose a nickname, and once connected, they can send and receive messages.</p><ol start=3><li><strong>Chat in Real-Time</strong></li></ol><p>Messages typed in any client terminal will be broadcast to all connected clients. If a user disconnects, the other clients will be notified.</p><h2 id=learning-points>Learning Points<a hidden class=anchor aria-hidden=true href=#learning-points>#</a></h2><ol><li><strong>Socket Programming</strong></li></ol><p>This project demonstrates the fundamentals of socket programming:</p><ul><li>Server-Client communication: You learned how to establish a connection between a server and multiple clients over TCP.</li><li>Socket creation: Both server and client sockets were created to send and receive data.</li><li>Handling multiple clients: With threading, the server can manage multiple clients simultaneously, making this a simple but powerful example of concurrent network programming.</li></ul><ol start=2><li><strong>Threading in Python</strong></li></ol><ul><li>Parallel handling of clients: The use of threads ensures that the server can handle multiple clients concurrently without blocking or slowing down due to one particular client.</li><li>Thread safety: Although this example doesn’t cover it explicitly, dealing with shared resources across threads requires care, especially when working on larger or more complex applications.</li></ul><ol start=3><li><strong>Message Broadcasting</strong></li></ol><p>The server can broadcast any client’s message to all other connected clients. This is a critical pattern in applications like chat rooms, multiplayer games, and real-time collaborative platforms.</p><ol start=4><li><strong>Handling Client Disconnects</strong></li></ol><p>The server not only handles client connections but also gracefully removes clients from the active list upon disconnection. This ensures that resources are cleaned up properly and other clients are notified.</p><h2 id=final-thoughts>Final Thoughts<a hidden class=anchor aria-hidden=true href=#final-thoughts>#</a></h2><p>This project offers a solid foundation for understanding socket programming, multi-threading, and basic network communication in Python. From here, you can expand and improve the project by:</p><ul><li>Adding a GUI: A graphical interface would make the chat application more user-friendly.</li><li>Implementing encryption: Add security to the chat by encrypting messages between the server and clients using SSL/TLS.</li><li>Enhancing error handling: While this application handles basic errors like disconnections, more sophisticated error handling would make it more robust.</li><li>Scaling: Modify the server to handle more significant traffic, or make it accessible over a public IP for use across networks.</li></ul><p>Feel free to experiment with the code, build upon it, and explore more advanced topics like non-blocking sockets, socket.io for web applications, or even building your own messaging protocols.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://kaliban2056.github.io/tags/programming/>programming</a></li><li><a href=https://kaliban2056.github.io/tags/python/>python</a></li><li><a href=https://kaliban2056.github.io/tags/networking/>networking</a></li></ul><nav class=paginav><a class=next href=https://kaliban2056.github.io/posts/building-a-simple-network-packet-sniffer-with-python/><span class=title>Next »</span><br><span>Building a Simple Network Packet Sniffer With Python</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Building a Simple Multi-Client Chat Application in Python on x" href="https://x.com/intent/tweet/?text=Building%20a%20Simple%20Multi-Client%20Chat%20Application%20in%20Python&amp;url=https%3a%2f%2fkaliban2056.github.io%2fposts%2fbuilding-a-simple-multi-client-chat-application-in-python%2f&amp;hashtags=programming%2cpython%2cnetworking"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Building a Simple Multi-Client Chat Application in Python on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fkaliban2056.github.io%2fposts%2fbuilding-a-simple-multi-client-chat-application-in-python%2f&amp;title=Building%20a%20Simple%20Multi-Client%20Chat%20Application%20in%20Python&amp;summary=Building%20a%20Simple%20Multi-Client%20Chat%20Application%20in%20Python&amp;source=https%3a%2f%2fkaliban2056.github.io%2fposts%2fbuilding-a-simple-multi-client-chat-application-in-python%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Building a Simple Multi-Client Chat Application in Python on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fkaliban2056.github.io%2fposts%2fbuilding-a-simple-multi-client-chat-application-in-python%2f&title=Building%20a%20Simple%20Multi-Client%20Chat%20Application%20in%20Python"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Building a Simple Multi-Client Chat Application in Python on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fkaliban2056.github.io%2fposts%2fbuilding-a-simple-multi-client-chat-application-in-python%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Building a Simple Multi-Client Chat Application in Python on whatsapp" href="https://api.whatsapp.com/send?text=Building%20a%20Simple%20Multi-Client%20Chat%20Application%20in%20Python%20-%20https%3a%2f%2fkaliban2056.github.io%2fposts%2fbuilding-a-simple-multi-client-chat-application-in-python%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Building a Simple Multi-Client Chat Application in Python on telegram" href="https://telegram.me/share/url?text=Building%20a%20Simple%20Multi-Client%20Chat%20Application%20in%20Python&amp;url=https%3a%2f%2fkaliban2056.github.io%2fposts%2fbuilding-a-simple-multi-client-chat-application-in-python%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Building a Simple Multi-Client Chat Application in Python on ycombinator" href="https://news.ycombinator.com/submitlink?t=Building%20a%20Simple%20Multi-Client%20Chat%20Application%20in%20Python&u=https%3a%2f%2fkaliban2056.github.io%2fposts%2fbuilding-a-simple-multi-client-chat-application-in-python%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://kaliban2056.github.io/>Kaliban's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>